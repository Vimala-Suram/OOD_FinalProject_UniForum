<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="800.0" prefWidth="1400.0"
            xmlns="http://javafx.com/fxml/1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="edu.northeastern.uniforum.forum.controller.ForgotPasswordController"
            style="-fx-background-color: #0B1416;">

    <stylesheets>
        <URL value="@../../application/reddit-dark-theme.css"/>
    </stylesheets>

    <HBox alignment="CENTER_LEFT" spacing="15.0"
          style="-fx-background-color: #1A1A1B; -fx-padding: 15 30;"
          AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"
          prefHeight="70.0">
        <children>
            <Button text="â† Back"
                    onAction="#handleBackAction"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 18px; -fx-cursor: hand;"/>
            <Label text="Forgot Password"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>
        </children>
    </HBox>

    <VBox spacing="25.0" alignment="TOP_CENTER"
          AnchorPane.topAnchor="90.0"
          AnchorPane.leftAnchor="0.0"
          AnchorPane.rightAnchor="0.0">

        <VBox spacing="10.0" maxWidth="650.0"
              style="-fx-background-color: #1A1A1B; -fx-background-radius: 20; -fx-padding: 40; -fx-border-color: #343536; -fx-border-radius: 20;">
            <children>
                <Label text="Reset your password"
                       style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Label text="Follow the steps below to securely reset your password."
                       style="-fx-font-size: 14px; -fx-text-fill: #D7DADC;"/>

                <VBox spacing="10.0">
                    <Label text="1. Verify Email"
                           style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <Label text="Enter the email address associated with your account."
                           style="-fx-text-fill: #D7DADC;"/>
                    <TextField fx:id="emailField" promptText="name@example.com"
                               style="-fx-background-color: #0B1416; -fx-text-fill: white; -fx-prompt-text-fill: #818384; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4;" 
                               prefHeight="40.0"/>
                    <Button fx:id="sendOtpButton" text="Send OTP"
                            onAction="#handleSendOtp"
                            style="-fx-background-color: #FF4500; -fx-text-fill: white; -fx-font-size: 15px; -fx-background-radius: 8px; -fx-cursor: hand; -fx-font-weight: bold;"
                            prefHeight="44.0"/>
                </VBox>

                <VBox fx:id="otpStepContainer" spacing="10.0" visible="false" managed="false">
                    <Label text="2. Enter OTP"
                           style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <Label text="We've sent a 6-digit OTP to your email. Enter it below."
                           style="-fx-text-fill: #D7DADC;"/>
                    <TextField fx:id="otpField" promptText="Enter OTP"
                               style="-fx-background-color: #0B1416; -fx-text-fill: white; -fx-prompt-text-fill: #818384; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4;" 
                               prefHeight="40.0" maxWidth="200.0"/>
                    <HBox spacing="10.0">
                        <Button text="Verify OTP"
                                onAction="#handleVerifyOtp"
                                style="-fx-background-color: #FF4500; -fx-text-fill: white; -fx-background-radius: 8px; -fx-cursor: hand; -fx-font-weight: bold;"
                                prefWidth="140.0" prefHeight="40.0"/>
                        <Button text="Resend OTP"
                                onAction="#handleResendOtp"
                                style="-fx-background-color: transparent; -fx-border-color: #FF4500; -fx-text-fill: white; -fx-background-radius: 8px; -fx-border-radius: 8px; -fx-cursor: hand;"
                                prefWidth="140.0" prefHeight="40.0"/>
                    </HBox>
                </VBox>

                <VBox fx:id="resetStepContainer" spacing="10.0" visible="false" managed="false">
                    <Label text="3. Set a New Password"
                           style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <Label text="Choose a strong password that you haven't used before."
                           style="-fx-text-fill: #D7DADC;"/>
                    <PasswordField fx:id="newPasswordField" promptText="New Password"
                                   style="-fx-background-color: #0B1416; -fx-text-fill: white; -fx-prompt-text-fill: #818384; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4;" 
                                   prefHeight="40.0"/>
                    <PasswordField fx:id="confirmPasswordField" promptText="Confirm Password"
                                   style="-fx-background-color: #0B1416; -fx-text-fill: white; -fx-prompt-text-fill: #818384; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4;" 
                                   prefHeight="40.0"/>
                    <Button text="Update Password"
                            onAction="#handleResetPassword"
                            style="-fx-background-color: #FF4500; -fx-text-fill: white; -fx-font-size: 15px; -fx-background-radius: 8px; -fx-cursor: hand; -fx-font-weight: bold;"
                            prefHeight="44.0"/>
                </VBox>

                <Label fx:id="statusLabel"
                       style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            </children>
        </VBox>
    </VBox>

</AnchorPane>
