<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="edu.northeastern.uniforum.forum.controller.ForumController"
           style="-fx-background-color: #1A1A1B;">

    <BorderPane>

        <top>
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="navbar" style="-fx-background-color: #1A1A1B; -fx-padding: 12 20; -fx-border-color: #343536; -fx-border-width: 0 0 1 0;">
                <children>

                    <HBox alignment="CENTER" spacing="8">
                        <Label text="UniForum" 
                               style="-fx-text-fill: #D7DADC; -fx-font-size: 20px; -fx-font-weight: 700; -fx-cursor: hand;"/>
                        <HBox.margin>
                            <Insets right="20" />
                        </HBox.margin>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="0" 
                          style="-fx-padding: 0; -fx-background-color: #272729; -fx-background-radius: 20; -fx-border-color: #FF4500; -fx-border-width: 1; -fx-border-radius: 20;" 
                          HBox.hgrow="ALWAYS">
                        <HBox.margin>
                            <Insets left="0" right="20" />
                        </HBox.margin>
                        <children>

                            <Label text="UF" 
                                   style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-color: #FF4500; -fx-background-radius: 50%; -fx-min-width: 32; -fx-min-height: 32; -fx-max-width: 32; -fx-max-height: 32; -fx-alignment: center;">
                                <HBox.margin>
                                    <Insets left="4" top="4" bottom="4" right="8" />
                                </HBox.margin>
                            </Label>
                            <TextField fx:id="searchField" 
                                       onAction="#onSearch" 
                                       promptText="Find anything" 
                                       styleClass="search-bar"
                                       style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill: white; -fx-prompt-text-fill: #818384; -fx-font-size: 14px; -fx-padding: 8 16 8 0;" 
                                       HBox.hgrow="ALWAYS" />

                            <Button fx:id="askButton" 
                                    onAction="#onAskClicked" 
                                    text="Ask" 
                                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: 600; -fx-font-size: 14px; -fx-padding: 6 16; -fx-cursor: hand; -fx-border-color: transparent;">
                                <HBox.margin>
                                    <Insets right="4" />
                                </HBox.margin>
                            </Button>
                        </children>
                    </HBox>

                    <HBox alignment="CENTER_RIGHT" spacing="12">
                        <children>

                            <Button fx:id="createPostButton" 
                                    onAction="#onCreatePostClicked" 
                                    text="Create Post" 
                                    styleClass="button-outline"
                                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: 600; -fx-border-color: #FF4500; -fx-border-width: 1; -fx-border-radius: 20; -fx-background-radius: 20; -fx-padding: 6 16; -fx-cursor: hand;"/>

                            <Label fx:id="usernameLabel" 
                                   text="username"
                                   style="-fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: 600; -fx-padding: 6 12; -fx-background-color: transparent; -fx-background-radius: 20; -fx-cursor: hand; -fx-border-color: #FF4500; -fx-border-width: 1; -fx-border-radius: 20;" 
                                   onMouseClicked="#onProfileClicked" />
                        </children>
                    </HBox>
                </children>
            </HBox>
        </top>

        <left>
            <VBox spacing="4" styleClass="sidebar" style="-fx-background-color: #1A1A1B; -fx-padding: 12; -fx-min-width: 200; -fx-border-color: #343536; -fx-border-width: 0 1 0 0;">

                <Button fx:id="homeNavButton" 
                        onAction="#onHomeClicked" 
                        text="Home" 
                        prefHeight="40.0" 
                        maxWidth="Infinity"
                        style="-fx-alignment: CENTER_LEFT; -fx-background-color: transparent; -fx-text-fill: #FFFFFF; -fx-background-radius: 20; -fx-padding: 10 12; -fx-font-size: 14px; -fx-font-weight: 600; -fx-cursor: hand;"/>

                <Button onAction="#onExploreClicked" 
                        text="Explore" 
                        prefHeight="40.0" 
                        maxWidth="Infinity"
                        style="-fx-alignment: CENTER_LEFT; -fx-background-color: transparent; -fx-text-fill: #FFFFFF; -fx-background-radius: 20; -fx-padding: 10 12; -fx-font-size: 14px; -fx-font-weight: 600; -fx-cursor: hand;"/>

                <Button onAction="#onCoursesClicked" 
                        text="Courses" 
                        prefHeight="40.0" 
                        maxWidth="Infinity"
                        style="-fx-alignment: CENTER_LEFT; -fx-background-color: transparent; -fx-text-fill: #FFFFFF; -fx-background-radius: 20; -fx-padding: 10 12; -fx-font-size: 14px; -fx-font-weight: 600; -fx-cursor: hand;"/>
            </VBox>
        </left>

        <center>
            <VBox spacing="0" style="-fx-background-color: #0B1416;">

                <HBox fx:id="filterStrip" 
                      alignment="CENTER_LEFT" 
                      spacing="16" 
                      styleClass="filter-strip"
                      style="-fx-padding: 12 20; -fx-background-color: #1A1A1B; -fx-border-color: #343536; -fx-border-width: 0 0 1 0;" 
                      visible="false" 
                      managed="false">
                    <children>
                        <Label text="FILTERS" 
                               style="-fx-text-fill: #818384; -fx-font-size: 11px; -fx-font-weight: 700;"/>

                        <VBox spacing="4">
                            <Label text="Courses" 
                                   style="-fx-text-fill: #818384; -fx-font-size: 10px; -fx-font-weight: 600;"/>
                            <ComboBox fx:id="communityFilter" 
                                      promptText="All Courses" 
                                      prefWidth="160" 
                                      style="-fx-background-color: #2A2A2A; -fx-text-fill: white; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4; -fx-prompt-text-fill: #818384;"/>
                        </VBox>

                        <VBox spacing="4">
                            <Label text="Tag" 
                                   style="-fx-text-fill: #818384; -fx-font-size: 10px; -fx-font-weight: 600;"/>
                            <ComboBox fx:id="tagFilter" 
                                      promptText="All Tags" 
                                      prefWidth="140" 
                                      style="-fx-background-color: #2A2A2A; -fx-text-fill: white; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4; -fx-prompt-text-fill: #818384;"/>
                        </VBox>

                        <VBox spacing="4">
                            <Label text="Sort By" 
                                   style="-fx-text-fill: #818384; -fx-font-size: 10px; -fx-font-weight: 600;"/>
                            <ComboBox fx:id="sortByFilter" 
                                      prefWidth="140" 
                                      style="-fx-background-color: #2A2A2A; -fx-text-fill: white; -fx-border-color: #343536; -fx-border-radius: 4; -fx-background-radius: 4; -fx-prompt-text-fill: #818384;"/>
                        </VBox>
                    </children>
                </HBox>

                <HBox spacing="0" VBox.vgrow="ALWAYS" style="-fx-background-color: #0B1416;">
                    <children>

                        <VBox HBox.hgrow="ALWAYS" style="-fx-background-color: #0B1416;">
                            <ScrollPane fitToWidth="true" 
                                        pannable="true" 
                                        style="-fx-background-color: transparent; -fx-background: transparent;">
                                <content>
                                    <VBox fx:id="postContainer" 
                                          spacing="10" 
                                          style="-fx-padding: 16; -fx-background-color: #0B1416;">

                                    </VBox>
                                </content>
                            </ScrollPane>
                        </VBox>
                    </children>
                </HBox>
            </VBox>
        </center>

    </BorderPane>

    <StackPane fx:id="modalOverlay" 
               alignment="CENTER" 
               visible="false" 
               managed="false"
               styleClass="modal-overlay">

        <Region fx:id="overlayBackground" 
                style="-fx-background-color: rgba(0, 0, 0, 0.9);" 
                onMouseClicked="#onOverlayClicked" />

        <VBox fx:id="dialogContainer" 
              alignment="CENTER" 
              spacing="0" 
              mouseTransparent="false"
              styleClass="modal-container">

        </VBox>
    </StackPane>

</StackPane>
